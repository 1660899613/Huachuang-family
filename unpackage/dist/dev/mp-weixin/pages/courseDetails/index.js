(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/courseDetails/index"],{370:function(e,t,n){"use strict";(function(e){n(5);o(n(3));var t=o(n(371));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},371:function(e,t,n){"use strict";n.r(t);var o=n(372),i=n(374);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n(376);var r,a=n(11),u=Object(a["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);u.options.__file="pages/courseDetails/index.vue",t["default"]=u.exports},372:function(e,t,n){"use strict";n.r(t);var o=n(373);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},373:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));try{o={uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,692))},uSticky:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-sticky/u-sticky")]).then(n.bind(null,668))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,700))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,833))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,841))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,736))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement;e._self._c},s=!1,r=[];i._withStripped=!0},374:function(e,t,n){"use strict";n.r(t);var o=n(375),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=i.a},375:function(e,t,n){"use strict";(function(e,o){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){n.e("components/common/details-list").then(function(){return resolve(n(846))}.bind(null,n)).catch(n.oe)},r={components:{detailsList:s},data:function(){return{show:!1,mlCurr:0,cuIndex:0,current:0,tabList:[{name:"详情"},{name:"套餐产品"},{name:"精彩集锦"}],list1:[],tcList:[],app_id:406077,app_secret:"Xt4yN3Fzgr1xd11kCbHFx6Fk",timestamp:this.generateTimeReqestNumber(),account_type:1,open_id:"18375875809",v:"2.0",customer_id:"",transactionNo:e.getStorageSync("transactionNo"),infor:{},userInfo:{},fddInfo:{},questResList:[]}},onShareAppMessage:function(e){return e.from,{title:this.infor.courseName,path:"/pages/courseDetails/index?id="+this.infor.courseId,imageUrl:this.shareCover}},onLoad:function(e){this.id=e.id},onShow:function(){this.getDetails(),this.getUserInfo()},methods:{shareRecord:function(){this.$H.post("/extension/shareCourse").then((function(e){console.log("share record succ")})).catch((function(e){console.error("share record error!")}))},open:function(){this.show=!0},close:function(){this.show=!1},courseCollection:function(){var e=this;this.infor.isCollect?this.$u.api.courseCollection({collect:0,courseId:this.infor.courseId}).then((function(t){console.log(t,"data"),e.infor.isCollect=0,e.$u.toast(t.message)})):this.$u.api.courseCollection({collect:1,courseId:this.infor.courseId}).then((function(t){console.log(t,"data"),e.infor.isCollect=1,e.$u.toast(t.message)}))},getDetails:function(){var t=this;e.showLoading({title:"加载中"}),this.$u.api.getCourseInfo({id:this.id}).then((function(n){console.log(n,"data1000"),t.infor=n.data.course,t.list1.push(t.infor.courseImg),1==t.infor.coursePackage&&(t.tabList[1].name="套餐产品",t.getCourseClass()),2==t.infor.coursePackage&&(t.tabList[1].name="班级排期",t.getCourseClass()),3==t.infor.coursePackage&&(t.tabList=[{name:"详情"}]),e.hideLoading(),console.log(t.list1,"banner")}))},getCourseClass:function(){var e=this;this.$u.api.getCourseClass({courseId:this.infor.courseId}).then((function(t){var n=t.data.courseResList?t.data.courseResList:[];n.length>0&&t.data.courseResList.forEach((function(e){e.cond=!1})),e.tcList=t.data.classList?t.data.classList:t.data.courseResList,console.log("获取班级排期",e.tcList)}))},changeopenItem:function(e){this.tcList[e].cond=!this.tcList[e].cond},swiperClick:function(){},tabClick:function(e){this.current=e.index},questionnaireSave:function(){console.log("this.questResList",this.questResList);for(var e=this,t={answer:"",courseId:e.infor.courseId},n=[],o=0;o<e.questResList.length;o++){if(!e.questResList[o].value)return void e.$u.toast("请回答第"+e.questResList[o].questNo+"个问题");var i={answerStr:e.questResList[o].value,questId:e.questResList[o].questId};n.push(i)}t.answer=JSON.stringify(n),console.log(t),e.$u.api.questionnaireSave(t).then((function(t){e.show=!1,e.$u.toast(t.message),setTimeout((function(){e.$f.jump("/pages/index/index",4)}),1e3)}))},questionnaireApply:function(){var t=this;this.$u.api.questionnaireApply({courseId:this.infor.courseId}).then((function(n){200==n.code?(t.questResList=n.data.questionnaire.questResList,t.open(),console.log(n.data.questionnaire.questResList)):e.$u.toast(n.message)}))},subClic:function(){3==this.infor.coursePackage?this.questionnaireApply():this.nextClick()},sha1:function(e){var t=this.$crypto.createHash("sha1");return t.update(e),t.digest("hex").toUpperCase()},md5:function(e){var t=this.$crypto.createHash("md5");return t.update(e),t.digest("hex").toUpperCase()},base64:function(e){var t=new o.from(e);return t.toString("base64")},ast:function(e){return e.split("").sort().join("")},callbackSmrz:function(){var t=this;this.$u.api.signCode({transaction_id:code,contract_id:1234,customer_id:this.customer_id,doc_title:"股权代持协议及授权委托书"}).then((function(n){console.log(n,"data 合同签署");var o=i({app_id:t.app_id,timestamp:n.data.timestamp,v:t.v,msg_digest:n.data.signCode,transaction_id:code,contract_id:1234,customer_id:t.customer_id,doc_title:"股权代持协议及授权委托书"},"contract_id",1234);e.request({url:"http://test.api.fabigbig.com:8888/api/extsign.api",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:o,method:"POST",success:function(e){e.data;console.log(e,"合同签署测试....")},fail:function(e){console.log(e)}})}))},isRz:function(t){var n=this;this.$u.api.signCode({verified_serialno:this.fddInfo.transactionId}).then((function(o){var i={app_id:n.app_id,timestamp:o.data.timestamp,v:n.v,msg_digest:o.data.signCode,verified_serialno:n.fddInfo.transactionId};e.request({url:"http://test.api.fabigbig.com:8888/api/find_personCertInfo.api",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:i,method:"POST",success:function(e){var n=e.data;console.log(e,"查询实名认证测试输出...."),t(n)},fail:function(e){console.log(e)}})}))},getUserInfo:function(){var e=this;this.$u.api.getUserInfo({}).then((function(t){e.userInfo=t.data.userInfo,e.fddInfo=t.data.fddInfo,console.log(e.fddInfo,e.userInfo,"用户信息")}))},nextClick:function(){return this.$f.jump("/pages/pay/order?id="+this.infor.courseId),!1},certificateSq:function(){var t=this.certificateSecret(),n=this.transactionNo,o=this.customer_id,i={app_id:this.app_id,timestamp:this.timestamp,v:this.v,msg_digest:t,customer_id:o,verified_serialno:n};e.request({url:"http://test.api.fabigbig.com:8888/api/apply_cert.api",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:i,method:"POST",success:function(t){var n=t.data;console.log(t,"实名认证结果测试输出...."),e.showToast({title:n.msg,icon:"none"})},fail:function(e){console.log(e)}})},signSecret:function(){},signFdd:function(){},getFddUrl:function(){var t=this,n=1,o=2,i="http://huachuang.yxy5g.com//home/fddNotify",s="",r=1,a=1,u=this;this.$u.api.signCode({customer_id:this.customer_id,verified_way:n,page_modify:o,cert_flag:a,notify_url:i,is_mini_program:r,return_url:s}).then((function(c){var d={app_id:t.app_id,timestamp:c.data.timestamp,v:t.v,customer_id:t.customer_id,msg_digest:c.data.signCode,verified_way:n,page_modify:o,is_mini_program:r,cert_flag:a,notify_url:i,return_url:s};e.request({url:"http://test.api.fabigbig.com:8888/api/get_person_verify_url.api",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},data:d,method:"POST",success:function(e){var t=e.data;console.log(t,"认证地址"),u.transactionNo=t.data.transactionNo;var n=u.$w_base.decode(t.data.url);u.fddSave(u.customer_id,t.data.transactionNo,n,(function(){u.$u.api.getUserInfo({}).then((function(e){var t=e.data.fddInfo;t.url&&wx.navigateToMiniProgram({appId:"wx855361a721050c6b",path:"pages/result-loading/result-loading?verifyUrl="+encodeURIComponent(t.url),envVersion:"release",success:function(e){console.log(e)}})}))}))},fail:function(e){console.log(e)}})}))},fddSave:function(e,t,n,o){this.$u.api.fddSave({customerId:e,transactionId:t,url:n}).then((function(e){console.log(e,"data fddSave"),o()}))},codeChange:function(e){this.tips=e},generateTimeReqestNumber:function(){var e=new Date;return e.getFullYear().toString()+this.pad2(e.getMonth()+1)+this.pad2(e.getDate())+this.pad2(e.getHours())+this.pad2(e.getMinutes())+this.pad2(e.getSeconds())},pad2:function(e){return e<10?"0"+e:e}}};t.default=r}).call(this,n(1)["default"],n(22).Buffer)},376:function(e,t,n){"use strict";n.r(t);var o=n(377),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=i.a},377:function(e,t,n){}},[[370,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/courseDetails/index.js.map